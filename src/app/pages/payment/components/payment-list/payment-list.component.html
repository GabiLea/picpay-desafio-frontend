<app-header></app-header>
<section class="container">
  <div class="payments-top">
    <h2 class="payments-title">Meus pagamentos</h2>
    <div class="add-payment">
      <button (click)="openCreatePaymentModal()" class="add-payment-button">Adicionar pagamento</button>
    </div>
  </div>

  <div class="payments-container mat-elevation-z8">
    <div class="filter-pagination-container">
      <app-filter (changedSearch)="filterData($event)"></app-filter>
      <mat-paginator
        [length]="totalPayments"
        [pageSize]="pageSize"
        (page)="loadPageData($event)"
        [pageSizeOptions]="pageSizeOptions"
        aria-label="Selecione a pÃ¡gina"
        showFirstLastButtons="true"
      >
      </mat-paginator>
    </div>

    <table mat-table [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)">
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by id">Id.</th>
        <td mat-cell *matCellDef="let element">{{ element.id }}</td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by name">Nome</th>
        <td mat-cell *matCellDef="let element">
          <span>{{ element.name }}</span>
          <small class="username">@{{ element.username }}</small>
        </td>
      </ng-container>
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by title">Cargo</th>
        <td mat-cell *matCellDef="let element">{{ element.title }}</td>
      </ng-container>
      <ng-container matColumnDef="value">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by value">Valor</th>
        <td mat-cell *matCellDef="let element">{{ element.value | currency: 'BRL' }}</td>
      </ng-container>
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by date">Data</th>
        <td mat-cell *matCellDef="let element">{{ element.date | date: 'dd MMM y' }}</td>
      </ng-container>
      <ng-container matColumnDef="isPaid">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by isPaid">Pago</th>
        <td mat-cell *matCellDef="let element">
          <input type="checkbox" [checked]="element.isPaid" (change)="updateIsPaid(element)" />
        </td>
      </ng-container>
      <ng-container matColumnDef="icons">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by isPaid"></th>
        <td mat-cell *matCellDef="let element">
          <mat-icon (click)="openEditPaymentModal(element)" class="icon" aria-hidden="false" aria-label="Editar"
            >mode_edit
          </mat-icon>
          <mat-icon (click)="openDeletePaymentModal(element)" class="icon" aria-hidden="false" aria-label="Excluir"
            >highlight_off</mat-icon
          >
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</section>
