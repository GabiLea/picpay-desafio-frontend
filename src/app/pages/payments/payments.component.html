<div class="container">
    <section class="header">
        <div>
            <img src="assets/images/texto-logo.png" alt="">
        </div>
        <div>
            <img src="assets/images/user.png" class='user_img' alt="">
        </div>
    </section>

    <section class="body" [class]="{blur: blur}">
        <div class="content">
            <div class="content-top">
                <h1>Meus Pagamentos</h1>
                <button (click)="openAddPaymentPopup()" mat-flat-button class='add-btn' color="primary">ADICIONAR PAGAMENTO</button>
            </div>

            <div class='table-container'>
                <div class='table-header'>
                    <div class="filters">
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="Pesquisar por usuário">
                            <mat-icon matSuffix>search</mat-icon>
                        </mat-form-field>
                        <button mat-flat-button class='search-btn'>
                            <mat-icon matSuffix>tune</mat-icon>
                            Filtrar
                        </button>
                    </div>
    
                    <div class="paginator">
                        <app-paginator></app-paginator>
                    </div>
                </div>

                <div class='table-body'>
                    <table mat-table [dataSource]="mock_payments" class="mat-elevation-z8">
                        <ng-container matColumnDef="name">
                            <mat-header-cell *matHeaderCellDef>
                              Usuário
                              <button class='unfold-column-btn' mat-icon-button>
                                  <mat-icon>unfold_more</mat-icon>
                              </button>
                            </mat-header-cell>
                            <mat-cell *matCellDef="let payment">
                                <div class='cell-data img-payment-field'>
                                    <img class='img-payment' [src]="payment.image">
                                </div>
                                <div class='cell-data user-payment'>
                                    <span> {{ payment.name }} </span>
                                    <sub> @{{ payment.username }} </sub>
                                </div>
                            </mat-cell>
                        </ng-container>
                      
                        <ng-container matColumnDef="title">
                            <mat-header-cell *matHeaderCellDef>
                                Título
                                <button class='unfold-column-btn' mat-icon-button>
                                    <mat-icon>unfold_more</mat-icon>
                                </button>
                            </mat-header-cell>
                            <mat-cell *matCellDef="let payment"> {{ payment.title }} </mat-cell>
                        </ng-container>
                      
                        <ng-container matColumnDef="date">
                            <mat-header-cell *matHeaderCellDef>
                                Data
                                <button class='unfold-column-btn' mat-icon-button>
                                    <mat-icon>unfold_more</mat-icon>
                                </button>
                            </mat-header-cell>
                            <mat-cell *matCellDef="let payment">
                                <div class='cell-data'>
                                    <span> {{ payment.date | date:'dd MMM YYYY' }} </span>
                                    <sub> {{ payment.date | date:' h:mm a' }} </sub>
                                </div>
                        </mat-cell>
                        </ng-container>
                      
                        <ng-container matColumnDef="value">
                            <mat-header-cell *matHeaderCellDef>
                                Valor
                                <button class='unfold-column-btn' mat-icon-button>
                                    <mat-icon>unfold_more</mat-icon>
                                </button>
                            </mat-header-cell>
                          <mat-cell *matCellDef="let payment"> {{ payment.value | currency:'R$ ' }} </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="isPayed">
                            <mat-header-cell *matHeaderCellDef> Pago </mat-header-cell>
                            <mat-cell *matCellDef="let payment">
                                <mat-checkbox
                                    class="example-margin"
                                    color="accent"
                                    [checked]="payment.isPayed">
                                </mat-checkbox>
                            </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="action">
                            <mat-header-cell *matHeaderCellDef></mat-header-cell>
                            <mat-cell *matCellDef="let payment">
                                <div>
                                    <span (click)="openEditPaymentPopup(payment)" class="material-icons action-btn"> edit </span>
                                    <span (click)="openDeletePaymentPopup(payment)" class="material-icons action-btn"> highlight_off </span>
                                </div>
                            </mat-cell>
                        </ng-container>
                      
                        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                      </table>
                </div>
            </div>
        </div>
    </section>
</div>
<app-add-payment *ngIf="addPaymentPopup" (close)='closePopup();' (submit)="closePopup(); addPayment($event);"></app-add-payment>
<app-edit-payment *ngIf="editPaymentPopup" (close)='closePopup();' (submit)="closePopup(); editPayment($event);" [payment]="payment"></app-edit-payment>
<app-delete-payment *ngIf="deletePaymentPopup" (close)='closePopup();' (submit)="closePopup(); deletePayment($event);" [payment]="payment"></app-delete-payment>