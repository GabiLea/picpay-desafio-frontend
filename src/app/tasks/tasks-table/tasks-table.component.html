<div
  class="mat-elevation-z2 mat-border-radius"
  (matSortChange)="announceSortChange($event)"
>
  <div class="table-header">
    <!-- Busca -->
    <mat-form-field appearance="outline" class="mat-form-search-field">
      <mat-icon matSuffix>search</mat-icon>
      <input
        matInput
        type="search"
        placeholder="Pesquisar por usuário"
        class="search-input"
        [ngModel]="searchInput" (ngModelChange)="searchUsername($event)"
      />
    </mat-form-field>
    <!-- Paginação -->
    <mat-paginator
      [pageSizeOptions]="[5, 15, 25]"
      showFirstLastButtons
      aria-label="Lista de pagamentos"
      class="mat-border-radius-paginator"
    >
    </mat-paginator>
  </div>

  <div class="table-wrapper mat-border-radius-wrapper">
    <table
      mat-table
      matSort
      [dataSource]="dataSource"
      class="mat-border-radius"
    >
      <!-- Filtro não retornou dados -->
      <ng-container class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4" class="empty-table-message">
          Nenhum pagamento encontrado.
        </td>
      </ng-container>

      <!-- Nome do usuário -->
      <ng-container matColumnDef="username">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Ordenado por usuário"
        >
          Usuário
        </th>
        <td mat-cell *matCellDef="let task">
          {{ task.username }}
          <span class="mat-cell-secondary">@{{ task.username }}</span>
        </td>
      </ng-container>

      <!-- Titulo do pagamento -->
      <ng-container matColumnDef="title">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Ordenado por titulo"
        >
          Titulo
        </th>
        <td mat-cell *matCellDef="let task">{{ task.title }}</td>
      </ng-container>

      <!-- Data do pagamento -->
      <ng-container matColumnDef="date">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Ordenado por data"
        >
          Data
        </th>
        <td mat-cell *matCellDef="let task">
          {{ task.date | dateFormat: "ll" }}
          <span class="mat-cell-secondary">{{
            task.date | dateFormat: "LT"
          }}</span>
        </td>
      </ng-container>

      <!-- Valor do pagamento -->
      <ng-container matColumnDef="value">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Ordenado por valor"
        >
          Valor
        </th>
        <td mat-cell *matCellDef="let task">
          {{ task.value | currency: "BRL" }}
        </td>
      </ng-container>

      <!-- Pagamento pago ou não -->
      <ng-container matColumnDef="isPayed">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          sortActionDescription="Ordenado por pagos"
        >
          Pago
        </th>
        <td mat-cell *matCellDef="let task">
          <mat-checkbox
            color="primary"
            [(ngModel)]="task.isPayed"
            (click)="pay(task)"
          ></mat-checkbox>
        </td>
      </ng-container>

      <!-- Ações do pagamento -->
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let task">
          <button
            mat-icon-button
            color="#333333"
            matTooltip="Editar pagamento"
            (click)="openEditModal(task)"
          >
            <img src="assets/svg/edit.svg" class="mat-18" />
          </button>
          <button
            mat-icon-button
            color="#333333"
            matTooltip="Excluir pagamento"
            (click)="openDeleteConfirmModal(task)"
          >
            <mat-icon class="mat-18">highlight_off</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>
